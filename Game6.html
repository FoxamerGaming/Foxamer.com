<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drifting Racing Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: #333;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Car properties
    const car = {
      x: canvas.width / 2,
      y: canvas.height - 100,
      width: 50,
      height: 100,
      speed: 0,
      angle: 0,
      maxSpeed: 5,
      friction: 0.05,
      turnSpeed: 3
    };

    // Key controls
    const keys = {
      ArrowUp: false,
      ArrowDown: false,
      ArrowLeft: false,
      ArrowRight: false
    };

    // Event listeners for key presses
    window.addEventListener('keydown', (e) => {
      if (keys.hasOwnProperty(e.key)) keys[e.key] = true;
    });
    window.addEventListener('keyup', (e) => {
      if (keys.hasOwnProperty(e.key)) keys[e.key] = false;
    });

    function updateCar() {
      // Accelerate and decelerate
      if (keys.ArrowUp) car.speed = Math.min(car.speed + 0.1, car.maxSpeed);
      if (keys.ArrowDown) car.speed = Math.max(car.speed - 0.1, -car.maxSpeed / 2);

      // Apply friction
      if (!keys.ArrowUp && !keys.ArrowDown) {
        car.speed *= 1 - car.friction;
        if (Math.abs(car.speed) < 0.05) car.speed = 0;
      }

      // Turning
      if (car.speed !== 0) {
        const direction = car.speed > 0 ? 1 : -1;
        if (keys.ArrowLeft) car.angle -= car.turnSpeed * direction;
        if (keys.ArrowRight) car.angle += car.turnSpeed * direction;
      }

      // Update position
      car.x += Math.sin(car.angle * Math.PI / 180) * car.speed;
      car.y -= Math.cos(car.angle * Math.PI / 180) * car.speed;

      // Keep car within bounds
      if (car.x < 0) car.x = 0;
      if (car.x + car.width > canvas.width) car.x = canvas.width - car.width;
      if (car.y < 0) car.y = 0;
      if (car.y + car.height > canvas.height) car.y = canvas.height - car.height;
    }

    function drawCar() {
      ctx.save();
      ctx.translate(car.x + car.width / 2, car.y + car.height / 2);
      ctx.rotate(car.angle * Math.PI / 180);
      ctx.fillStyle = 'red';
      ctx.fillRect(-car.width / 2, -car.height / 2, car.width, car.height);
      ctx.restore();
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateCar();
      drawCar();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
